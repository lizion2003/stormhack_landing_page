<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Morse </title>
<style>
  :root { --stroke: 2; --period: 60; } /* seconds per rotation */
  html,body { height:100%; margin:0; background:#fff; }
  svg { width:100vw; height:100vh; display:block; }
  .boundary {
    fill:none;
    stroke:#000;
    stroke-width:var(--stroke);
    vector-effect:non-scaling-stroke;
  }
  .filled { fill:#000; stroke:none; }



  .circle { fill:#fff; pointer-events:none; transition: fill 0.2s; }
  .rect   { fill:#000; pointer-events:none; transition: fill 0.2s; }

  /* Flash effects */
  .circle.flash { fill:#888 !important; }
  .rect.flash   { fill:#666 !important; }


  text { font-family:sans-serif; font-size:5px; }
  .text-white { fill:#fff; }

   /* Hint text, subtle in bottom-right */
  .hint {
    position: absolute;
    bottom: 12px;
    right: 16px;
    font-family: sans-serif;
    font-size: 13px;
    color: #777;
    background: rgba(255,255,255,0.6);
    padding: 4px 8px;
    border-radius: 4px;
    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    user-select: none;
    pointer-events: none;
  }
</style>
</head>
<body>
<svg viewBox="0 0 100 100" preserveAspectRatio="xMidYMid slice">
  <defs>
    <clipPath id="clip" clipPathUnits="userSpaceOnUse">
      <rect x="0" y="0" width="100" height="100"/>
    </clipPath>
  </defs>

  <!-- Rotating group -->
  <g id="rotor" clip-path="url(#clip)">
    <!-- Black filled side -->
    <polygon class="filled"
      points="-1000000,40  50,40  50,60  1000000,60
              1000000,0    -1000000,0" />

    <!-- Boundary line -->
    <polyline class="boundary"
      points="-1000000,40  50,40  50,60  1000000,60" />

    <!-- White circle (on diagonal axis, upper-right) -->
    <circle id="circle" class="circle" r="4"/>

    <!-- Black rectangle (on diagonal axis, lower-left, long side parallel to vertical edge) -->
    <rect id="rect" class="rect" width="4" height="14"/>
  </g>

  <!-- Static text -->
  <text x="5" y="95" class="text-white">LEARN</text>
  <text x="85" y="15" fill="#000">DUEL</text>
</svg>


<div class="hint">
  Press <strong>Spacebar</strong>: tap for DOT ·, hold for DASH –
</div>

<script>
  const circle = document.getElementById('circle');
  const rect = document.getElementById('rect');

  const d = 10; // offset from center along diagonal

  // Circle on axis: top-right
  circle.setAttribute('cx', 50 + d);
  circle.setAttribute('cy', 59 - d);

  // Rectangle on axis: bottom-left
  const rw = 5, rh = 34; // vertical long side
  const rx = 50 - d, ry = 50 + d;
  rect.setAttribute('x', rx - rw/2);
  rect.setAttribute('y', ry - rh/2);

  // IMPORTANT: no rotation needed — it's drawn "long side vertical"
  // so it matches the middle edge's orientation

  // Rotation animation
  const rotor = document.getElementById('rotor');
  const hash = new URLSearchParams(location.hash.slice(1));
  const periodSec = Number(hash.get('period')) || 60;
  const period = periodSec * 1000;

  if (!matchMedia('(prefers-reduced-motion: reduce)').matches) {
    let t0 = performance.now();
    (function animate(now){
      const t = ((now - t0) % period) / period;
      rotor.setAttribute('transform', `rotate(${t * 360} 50 50)`);
      requestAnimationFrame(animate);
    })(t0);
  }

// Morse-style input
  let pressStart = null;

  window.addEventListener("keydown", e => {
    if (e.code === "Space" && pressStart === null) {
      pressStart = Date.now();
      e.preventDefault();
    }
  });

  window.addEventListener("keyup", e => {
    if (e.code === "Space" && pressStart !== null) {
      const duration = Date.now() - pressStart;
      pressStart = null;

      if (duration < 250) {
        // dot
        circle.classList.add("flash");
        setTimeout(()=>circle.classList.remove("flash"), 500);
      } else {
        // dash
        rect.classList.add("flash");
        setTimeout(()=>rect.classList.remove("flash"), 500);
      }
      e.preventDefault();
    }
  });
</script>
</body>
</html>
