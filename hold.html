<!doctype html>
<html lang="en">
<head>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=EB+Garamond:ital,wght@0,400..800;1,400..800&display=swap" rel="stylesheet">
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Hold Master</title>
<style>
  html,body {
    height:100%; margin:0;
    background: #888;
  }
  
  svg { width:100vw; height:100vh; display:block; }
  
  /* Congratulations message styling */
  .congrats-text {
    fill: #fff;
    font-family: "EB Garamond", serif;
    font-weight: 700;
    text-anchor: start;
    dominant-baseline: hanging;
  }
  
  /* Flash animation for DOT and DASH */
  .flash {
    animation: flashEffect 0.3s ease-in-out;
  }
  
  @keyframes flashEffect {
    0% { fill: #fff; }
    50% { fill: #000; }
    100% { fill: #fff; }
  } 
</style>
</head>
<body>
<svg viewBox="0 0 100 100" preserveAspectRatio="xMidYMid meet">
  
  <text x="-20" y="8"  
        font-size="6" 
        class="congrats-text">
    You are ready to learn some Morse Code!
  </text>
  
  <!-- Summary of learned skills -->

  
  <!-- DOT representation -->
  <circle id="dotElement" cx="0" cy="40" r="6" fill="#fff"/>
  <text x="-6" y="55" font-size="6" class="congrats-text">DOT</text>
  
  <!-- DASH representation -->
  <rect id="dashElement" x="35" y="37" width="20" height="5" fill="#fff"/>
  <text x="37" y="55" font-size="6" class="congrats-text">DASH</text>
  
  <!-- HOLD representation -->
  <polygon id="holdElement" points="80,42 105,42 105,37" fill="#fff"/>
  <text x="85" y="55" font-size="6" class="congrats-text">HOLD</text>
  
  <text x="14" y="78" 
        font-size="6" 
        class="congrats-text delayed-text"
        id="longDashInstruction">
    HOLD to learn characters . . . 

  </text>
</svg>

<script>
  // Timing thresholds
  const DOT_THRESHOLD = 250;    // < 250ms = DOT
  const DASH_THRESHOLD = 1000;  // 250ms-1000ms = DASH
                                // >= 1000ms = HOLD
  
  let pressStartTime = 0;
  let navigating = false;
  
  // Get references to SVG elements
  const dotElement = document.getElementById('dotElement');
  const dashElement = document.getElementById('dashElement');
  const holdElement = document.getElementById('holdElement');
  
  function flashElement(element) {
    element.classList.add('flash');
    setTimeout(() => {
      element.classList.remove('flash');
    }, 300);
  }
  
  function handlePress() {
    if (navigating) return;
    pressStartTime = Date.now();
  }
  
  function handleRelease() {
    if (navigating || pressStartTime === 0) return;
    
    const duration = Date.now() - pressStartTime;
    pressStartTime = 0;
    
    if (duration < DOT_THRESHOLD) {
      // DOT detected - flash the circle
      flashElement(dotElement);
    } else if (duration < DASH_THRESHOLD) {
      // DASH detected - flash the rectangle
      flashElement(dashElement);
    } else {
      // HOLD detected - redirect to e.html
      navigating = true;
      location.href = "e.html";
    }
  }
  
  // Add event listeners for mouse and touch
  document.addEventListener('mousedown', handlePress);
  document.addEventListener('mouseup', handleRelease);
  document.addEventListener('touchstart', handlePress);
  document.addEventListener('touchend', handleRelease);
  
  // Prevent context menu on long press
  document.addEventListener('contextmenu', (e) => e.preventDefault());
</script>
</body>
</html>